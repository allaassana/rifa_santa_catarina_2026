<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <title>Rifa Santa Catarina 2025</title>
  <link rel="stylesheet" href="css/style.css" />

  <style>
    body { background:#f6f7f9; font-family: Arial, sans-serif; margin:0 }

    header {
      background:#1f3a5f;
      color:#fff;
      padding:30px 20px;
      text-align:center;
    }

    header img {
      height:80px;
      margin-bottom:15px;
    }

    .container {
      max-width:1200px;
      margin:20px auto;
      padding:20px;
    }

    .grid {
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(48px,1fr));
      gap:6px;
      margin-top:15px;
    }

    .available {
      background:#a8d27a;
      border:none;
      padding:10px;
      border-radius:6px;
      cursor:pointer;
      font-weight:bold;
    }

    .sold {
      background:#ddd;
      border:none;
      padding:10px;
      border-radius:6px;
      cursor:not-allowed;
      color:#555;
    }

    .hidden { display:none !important }

    input {
      padding:8px;
      margin:4px 0;
      width:100%;
      max-width:300px;
    }

    .btn {
      padding:10px 16px;
      border-radius:6px;
      border:none;
      cursor:pointer;
      margin:5px 5px 0 0;
      font-weight:bold;
    }

    .btn.green { background:#4CAF50; color:#fff }
    .btn.blue { background:#1f3a5f; color:#fff }
    .btn.gray { background:#ccc }

    .card {
      background:#fff;
      padding:20px;
      border-radius:10px;
      margin-top:25px;
    }

    .modal {
      position: fixed;
      inset:0;
      background:rgba(0,0,0,.6);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:9999;
    }

    .modal-box {
      background:#fff;
      padding:25px;
      border-radius:10px;
      width:320px;
      text-align:center;
    }
  </style>
</head>

<body>

<header>
  <img src="assets/logo_diocese.png" alt="Logo Diocese">
  <h1>Rifa Santa Catarina 2025</h1>
  <p>Centro Pastoral Santa Ana & SÃ£o Joaquim</p>
</header>

<div class="container">

  <p>
    <strong>Vendidos:</strong> <span id="soldCount">0</span> |
    <strong>DisponÃ­veis:</strong> <span id="availCount">120</span>
  </p>

  <div id="ticketGrid" class="grid"></div>

  <div id="formArea" class="card hidden">
    <h3>Bilhete NÂº <span id="ticketNumber"></span></h3>

    <input id="nome" placeholder="Nome *">
    <input id="telefone" placeholder="Telefone *">
    <input id="email" placeholder="Email *">
    <input id="nascimento" type="date">
    <input id="cidade" placeholder="Cidade">
    <input id="pais" placeholder="PaÃ­s">
    <input id="comprovativo" type="file">

    <br>
    <button id="confirmar" class="btn green">Confirmar Compra</button>
    <button id="cancelar" class="btn gray">Cancelar</button>
  </div>

  <div class="card">
    <h3>ðŸ’³ Dados BancÃ¡rios</h3>
    <p><strong>BCA â€“ IBAN:</strong><br>CV64 0003 0000 0254 4214 101 76</p>
    <p><strong>CECV â€“ IBAN:</strong><br>CV64 0002 0000 0384 4137 102 02</p>
  </div>

  <div class="card">
    <h3>ðŸ“ž Contactos</h3>
    <p>Esmeraldo Borges â€“ miraborges10@hotmail.com</p>
    <p>Ana Maria Carvalho â€“ dinaleia@hotmail.com</p>
  </div>

  <div style="margin-top:25px">
    <a href="https://drive.google.com/file/d/1TeVBGckN8YbeV2g_-cvc-qTAL_SoVhso/view"
       target="_blank"
       class="btn blue">
      ðŸ“„ Ver Regulamento
    </a>
  </div>

</div>

<!-- MODAL (COMEÃ‡A SEMPRE ESCONDIDO) -->
<div id="modal" class="modal hidden">
  <div class="modal-box">
    <h3>âœ… Compra Confirmada</h3>
    <p><strong>Bilhete:</strong> <span id="modalBilhete"></span></p>
    <p><strong>Nome:</strong> <span id="modalNome"></span></p>

    <a id="whatsappBtn" target="_blank" class="btn green">
      ðŸ“² Enviar WhatsApp
    </a>

    <br><br>
    <button id="fecharModal" class="btn gray">Fechar</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  window.db = supabase.createClient(
    "https://ydyuxumwqnuhomahaxet.supabase.co",
    "sb_publishable_mTc8Aoplv-HTj-23xoMZ_w_gzoQkN3u"
  );
</script>

<script src="js/index.js"></script>

</body>
</html>
